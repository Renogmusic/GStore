@model GStore.Areas.StoreAdmin.ViewModels.StoreAdminViewModel
@using GStore.AppHtmlHelpers
@using GStore.Data
@using GStore.Identity
<div class="row">
	<h2 class="col-md-offset-3 col-md-6 jumbotron StoreAdminDetailsPageTitle text-center text-success">Client Configuration Manager</h2>
</div>
@if (Html.UserHasPermissionToAny(GStoreAction.ClientConfig_Edit, GStoreAction.ClientConfig_View))
{
	<div class="row">
		<div class="bg-danger table-bordered col-md-offset-3 col-md-6">
			<h2>Client Configuration</h2>
			<p><strong>Applies to all Store Fronts</strong></p>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-6 col-sm-5 text-right">
			<h2>Client</h2>
		</div>
		<div class="col-xs-6 col-sm-7 text-left">
			<h3>@Html.ActionLink("View/Edit Client Configuration", "ClientView", null, new { @class="btn btn-warning" } )</h3>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-12">&nbsp;<br />&nbsp;</div>
	</div>
}
@{int counter = 0;}
@if (Html.UserHasPermissionToAny(GStoreAction.ClientConfig_StoreFrontConfig_Edit, GStoreAction.ClientConfig_StoreFrontConfig_View))
{
	<div class="row">
		<div class="col-xs-12 bg-primary table-bordered col-md-offset-3 col-md-6">
			<h2>Store Front Configuration</h2>
		</div>
	</div>

	GStore.Models.StoreFront currentStoreFront = Html.CurrentStoreFront(true);
	foreach (GStore.Models.StoreFront storeFront in currentStoreFront.Client.StoreFronts.AsQueryable().WhereIsActive().ApplySort(null, null, null))
	{
		if (storeFront.Authorization_IsAuthorized(Html.CurrentUserProfile(true), true, GStoreAction.ClientConfig_StoreFrontConfig_Edit, GStoreAction.ClientConfig_StoreFrontConfig_View))
		{
			counter++;
			<div class="row">
				<div class="col-xs-6 col-sm-5 text-right">
					<h2>@(storeFront.Name + " [" + storeFront.StoreFrontId + "]")</h2>
				</div>
				<div class="col-xs-6 col-sm-7 text-left">
					<h3>@Html.ActionLink("View/Edit Configuration", "StoreFrontView", new { id = storeFront.StoreFrontId }, new { @class = "btn btn-primary" } )</h3>
				</div>
			</div>
		}
	}
	if (counter == 0)
	{
		<div class="row">
			<div class="col-xs-12">
				<h2>You do not have access to any store fronts.</h2>
			</div>
		</div>
	}
}
<hr />
<div>
	@Html.ActionLink("Back to Store Admin", "Index", "StoreAdmin")
</div>
